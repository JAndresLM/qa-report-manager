<div class="uk-overflow-auto uk-card uk-card-default">
  <div class="uk-card-header">
    <div class="" uk-grid>
      <div class="uk-width-1-3">
        <mat-form-field class="width-50">
          <mat-select placeholder="Display data for">
            <mat-option *ngFor="let timeLapse of timeLapses" [value]="timeLapse.value" (click)="updateGraph()">
              {{timeLapse.viewValue}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="uk-width-1-3">
        <mat-form-field>
          <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter by keywords">
        </mat-form-field>
      </div>
      <div class="uk-width-1-3 uk-text-right">
        <mat-button-toggle-group #group="matButtonToggleGroup">
          <mat-button-toggle value="table" (click)="selectTableView()" [ngClass]="{'selected-toggle': !isGraphDisplayed()}">
            <mat-icon>list</mat-icon>
          </mat-button-toggle>
          <mat-button-toggle value="graph" (click)="selectGraphView()" [ngClass]="{'selected-toggle': isGraphDisplayed()}">
            <mat-icon>timeline</mat-icon>
          </mat-button-toggle>
        </mat-button-toggle-group>
      </div>
    </div>
  </div>
  <div class="uk-card-body">
    <div class="example-container" [hidden]="isGraphDisplayed()">

      <mat-table [dataSource]="dataSource" matSort (matSortChange)="sortData($event)" matSortActive="name" matSortDirection="desc">
        <!-- Status Column -->
        <ng-container matColumnDef="status">
          <mat-header-cell *matHeaderCellDef mat-sort-header matSortActive> Status </mat-header-cell>
          <!--<mat-cell *matCellDef="let row"> {{row.status}} </mat-cell>-->
          <mat-cell *matCellDef="let row">
            <a 
              class="uk-badge status"
              [class.green-color]="row.result == 'SUCCESS'"
              [class.yellow-color]="row.result == 'UNSTABLE'"
              [class.red-color]="row.result == 'FAILURE'"
            >
              {{row.result}}
            </a>
          </mat-cell>
        </ng-container>

        <!-- Build Number Column -->
        <ng-container matColumnDef="name">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Build Number </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{row.name.substr(-3)}} </mat-cell>
        </ng-container>

        <!-- Date Column -->
        <ng-container matColumnDef="date">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Date </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{row.date | date : 'medium'}} </mat-cell>
        </ng-container>

        <!-- Duration Column -->
        <ng-container matColumnDef="duration">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Duration </mat-header-cell>
          <mat-cell *matCellDef="let row" [style.color]="row.color"> {{toHHMM(row.duration)}} </mat-cell>
        </ng-container>

        <!-- Total TCs Column -->
        <ng-container matColumnDef="totalTests">
          <mat-header-cell *matHeaderCellDef> Total TCs </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{row.buildReport.totalTests}} </mat-cell>
        </ng-container>

        <!-- Passed TCs Column -->
        <ng-container matColumnDef="passed_tcs">
          <mat-header-cell *matHeaderCellDef> Passed TCs </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{row.buildReport.totalTests-row.buildReport.failedTests}} </mat-cell>
        </ng-container>

        <!-- Failed TCs Column -->
        <ng-container matColumnDef="failedTests">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Failed TCs </mat-header-cell>
          <mat-cell *matCellDef="let row"> {{row.buildReport.failedTests}} </mat-cell>
        </ng-container>

        <!-- Pass Rate Column -->
        <ng-container matColumnDef="pass_rate">
          <mat-header-cell *matHeaderCellDef> Pass Rate </mat-header-cell>
          <mat-cell *matCellDef="let row" [style.color]="row.color"> {{getPassRate(row.buildReport.totalTests,row.buildReport.failedTests)}} </mat-cell>
        </ng-container>

        <!-- Report Options Column -->
        <ng-container matColumnDef="reports">
          <mat-header-cell *matHeaderCellDef mat-sort-header> Report Options </mat-header-cell>
          <!--<mat-cell *matCellDef="let row" [style.color]="row.color"> {{row.reports}} </mat-cell>-->
          <mat-cell *matCellDef="let row" [style.color]="row.color">
            <a mat-raised-button class="custom-link" href="{{row.url}}" target="_blank">
              Open In Jenkins <a uk-icon="forward"></a>
            </a>
          </mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;">
        </mat-row>
      </mat-table>

      <mat-paginator [pageSizeOptions]="[10, 25, 50, 100]"></mat-paginator>
    </div>
    <div class="example-container" [hidden]="!isGraphDisplayed()">
        <div *ngIf="chart">
          <canvas id="canvas">{{ chart }}</canvas>
        </div>
    </div>
  </div>
</div>
